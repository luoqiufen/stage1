<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>05_表单提交验证2</title>
</head>
<body>
	<form action="index.php" name="article">
		<p>
			标题: <input type="text" name="title">
			<span></span>
		</p>
		<p>
			内容: <textarea name="con" cols="30" rows="10"></textarea>
			<span></span>
		</p>
		<p>
			<input type="button" value="发表">
		</p>
	</form>

	<script>
		// 获取"发表"按钮
		var btn=document.querySelector('input[type=button]');
		console.log(btn);
		// 点击按钮:去做表单验证,验证成功,表单提交
		btn.onclick=function(){
			// alert('开始验证');
			/*checkTitle();
			checkCon();*/
			if(checkTitle()&&checkCon()){
				document.forms['article'].submit()
			}
		}
		// ;
		
		// 1)验证标题
		// 返回值
		// 成功:return
		// 失败:return
		// 不能为空,不得大于10位
		function checkTitle(){
			var title=document.querySelector('input');
			var span=title.nextElementSibling;
			console.log(title,span);

			if(title.value==''){
				span.innerHTML='<font color=red>标题不能为空</font>';
				return false;
			}else if(title.value.length>10){
				span.innerHTML='<font color=red>标题长度不能大于10</font>';
				return false;
			}else{
				return true;
			}
		}

		//内容
		//// 成功:return
		// 失败:return
		// 不能为空,不包含@/#/$ 
		function checkCon(){
			var con=document.querySelector('textarea');
			var span=con.nextElementSibling;
			console.log(con,span);

			if(con.value==''){
				span.innerHTML='<font color=red>标题不能为空</font>';
				return false;
			}else if((con.value.indexOf('@')!=-1)||(con.value.indexOf('#')!=-1)||(con.value.indexOf('$')!=-1)){
				span.innerHTML='<font color=red>标题长度不能大于10</font>';
				return false;
			}else{
				return true;
			}
		}

	</script>
</body>
</html>